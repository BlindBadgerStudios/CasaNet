version: "3"
services:
  sonarr:
    container_name: sonarr
    image: ghcr.io/linuxserver/sonarr:latest
    security_opt:
      - no-new-privileges:true
    restart: unless-stopped
    ports:
      - 8989:8989
    volumes:
      - local-sonarr:/config
      - local-root:/media
    environment:
      TZ: America/Los_Angeles
      PUID: ${PUID} # Ex for Synology: 1026
      PGID: ${PGID} # Ex for Synology: 100
  
  sonarr-4k:
    container_name: sonarr-4k
    image: ghcr.io/linuxserver/sonarr:latest
    security_opt:
      - no-new-privileges:true
    restart: unless-stopped
    ports:
      - 8990:8989
    volumes:
      - local-sonarr4k:/config
      - local-root:/media
    environment:
      TZ: America/Los_Angeles
      PUID: ${PUID} # Ex for Synology: 1026
      PGID: ${PGID} # Ex for Synology: 100

#Local volumes for fastest downloads (1Gbps = ~110MB/s)
volumes:

#MEDIA_ROOT is the root folder of the structure (e.g. /media), this should contain your plex/jellyfin library and the download folders
  local-root:
    driver: local 
    driver_opts:
      type: none
      o: bind
      device: ${MEDIA_ROOT}

#CONFIG_PATH is for application configuration directories, this can be anywhere you want to store the configs for each application
  local-sonarr:
    driver: local 
    driver_opts:
      type: none
      o: bind
      device: ${CONFIG_PATH}/sonarr
  local-sonarr4k:
    driver: local 
    driver_opts:
      type: none
      o: bind
      device: ${CONFIG_PATH}/sonarr4k